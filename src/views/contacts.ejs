<%- include("./includes/head"); %> <%- include("./includes/navbar"); %>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-lg-8 my-4">
      <h1 class="text-center">Agenda</h1>
      <p class="text-center lead">Seus contatos</p>

      <%- include("./includes/messages"); %>

      <!-- Card -->
      <div class="card shadow-sm">
        <div class="card-body">
          <!-- FORMULÃRIO DE CONTATO -->
          <h5 class="mb-3">Adicionar contato</h5>

          <form action="/contacts" method="POST">
            <input type="hidden" name="_csrf" value="<%= csrfToken %>" />

            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="name">Nome</label>
                <input
                  value="<%= contact.nome %>"
                  type="text"
                  class="form-control"
                  id="name"
                  name="name"
                  required
                />
              </div>

              <div class="form-group col-md-6">
                <label for="lastname">Sobrenome</label>
                <input
                  value="<%= contact.sobrenome %>"
                  type="text"
                  class="form-control"
                  id="lastname"
                  name="lastname"
                />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="phone">Telefone</label>
                <input
                  value="<%= contact.telefone %>"
                  type="text"
                  class="form-control"
                  id="phone"
                  name="phone"
                />
              </div>

              <div class="form-group col-md-6">
                <label for="email">E-mail</label>
                <input
                  value="<%= contact.email %>"
                  type="email"
                  class="form-control"
                  id="email"
                  name="email"
                />
              </div>
            </div>

            <button type="submit" class="btn btn-dark btn-block">
              Salvar contato
            </button>
          </form>

          <hr />

          <!-- TABELA -->
          <div class="table-responsive mt-3">
            <table class="table table-hover">
              <thead class="thead-dark">
                <tr>
                  <th>Nome</th>
                  <th>Sobrenome</th>
                  <th>Telefone</th>
                  <th>Email</th>
                </tr>
              </thead>

              <tbody>
                <% if (contacts && contacts.length) { %> <%
                contacts.forEach(function (contact) { %>
                <tr>
                  <td><%= contact.nome %></td>
                  <td><%= contact.sobrenome %></td>
                  <td><%= contact.telefone %></td>
                  <td><%= contact.email %></td>
                </tr>
                <% }) %> <% } else { %>
                <tr>
                  <td colspan="4" class="text-center text-muted">
                    Nenhum contato cadastrado
                  </td>
                </tr>
                <% } %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include("./includes/footer"); %>
